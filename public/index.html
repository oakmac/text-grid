<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="ie=edge" http-equiv="x-ua-compatible" />
  <title>Text Grid (Development)</title>
  <meta content="" name="description" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <link href="css/main.css" rel="stylesheet" />
  <style type="text/css">
  .buttons-container {
    margin-bottom: 40px;
  }
  </style>
</head>
<body>
<div class="buttons-container">
  <input type="text" id="textInput" />
  <button id="btn1">insertText()</button>
  <button id="btn2">removeText()</button>
  <button id="btn3">moveCursor()</button>
</div>
<div id="gridContainer"></div>
<script src="js/main.js"></script>
<script>
/*
// low-level functions
grid.setText
grid.setCursor(<cursorIdx>, <rowIdx>, <colIdx>);
grid.typeChar("a");

// higher-level functions (that could be accomplished using the low-level functions)
grid.setChar();
grid.setCursor();
grid.addCursor();
grid.pasteText();
*/

function byId(id) {
  return document.getElementById(id);
}

function clickBtn1() {
  grid.insertText([3, 24], ", foo")
}

function clickBtn2() {
  grid.removeText([2, 8], 1);
}

function clickBtn3() {
  grid.moveCursor();
}

const BACKSPACE = 8;
const TAB = 9;
const ENTER = 13;
const END = 35;
const HOME = 36;
const LEFT = 37;
const UP = 38;
const RIGHT = 39;
const DOWN = 40;
const DELETE = 46;

function onTextInputKeypress(evt) {
  evt.preventDefault();

  const keyCode = evt.keyCode;
  const newChar = String.fromCharCode(keyCode);

  if (keyCode === LEFT) {
    grid.moveCursorsLeft();
  }
  else if (keyCode === RIGHT) {
    grid.moveCursorsRight();
  }
  else if (keyCode === UP) {
    grid.moveCursorsUp();
  }

  else if (keyCode === DOWN) {
    grid.moveCursorsDown();
  }
  else if (keyCode === END) {
    grid.moveCursorsToEol();
  }
  else if (keyCode === HOME) {
    grid.moveCursorsToBol();
  }
  // TODO: delete character
  // TODO: enter character\
  else {
    // TODO: insert text at the cursor
  }
}

byId('btn1').addEventListener('click', clickBtn1);
byId('btn2').addEventListener('click', clickBtn2);
byId('btn3').addEventListener('click', clickBtn3);
byId('textInput').addEventListener('keydown', onTextInputKeypress);
byId('textInput').focus();
</script>
</body>
</html>
